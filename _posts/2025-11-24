---
title: "Mini Project: Well Log Plotting and Data Diagnostics"
date: 2025-11-24
permalink: /posts/log-plot-bdnc01/
tags:
  - petrophysics
  - well logs
  - las file
  - python
---

### ðŸš€ Project Overview

This mini-project demonstrates how to load, process, and plot raw well log data from a non-standard **LAS (Log ASCII Standard)** file using Python. A key challenge addressed is the mismatch between assumed standard mnemonics (log names) and the actual mnemonics present in the file (`BDN-C01_well.las`), as well as diagnosing **missing data** (null values) within a key log curve, **TR21** (Sonic Transit Time).

### Data Diagnostics: TR21 Log Coverage

While attempting to plot the Sonic Log (`TR21`), the curve appeared flat or missing across most of the well depth. A quick diagnostic revealed the cause: the log only contains valid data for a very small interval at the bottom of the hole.

| Log | Mnemonic | % Missing Data | Range of Valid Data |
| :---: | :---:---: | :---: | :---: |
| **Sonic** | `TR21` | **99.74%** | **2866.5 m to 2871.2 m** |

### Final Log Mappings Used

To ensure successful plotting, the code used the following confirmed mnemonics:

| Log Function | Mnemonic in File | Plotting Code Key |
| :---: | :---: | :---: |
| Gamma Ray | `GRGC` | `GR` |
| Sonic P-wave | `TR21` | `DTCO` |
| Density | `DEN` | `DEN` |
| Neutron Porosity | `NPOR` | `NPHI` |
| Resistivity | `R60T` | `RES` |

***

### Resulting Log Plot

The final plot successfully displays the four major log curves over the entire depth range of the well, confirming data integrity for all major curves except `TR21`.

<figure style="text-align:center;">
  <br/><img src='/images/OUTPUT.png'> 
  <figcaption>Final 5-Track Log Plot for BDN-C01. Note: TR21 data is only present near the bottom (below 2866m).</figcaption>
</figure>

### Python Code (`log_plotter.py`)

This is the final, fully corrected Python code used to generate the 5-track log plot and save it as `OUTPUT.png`. It handles mnemonic mapping, reverse axis plotting (for porosity and slowness), and logarithmic scaling (for resistivity).

```python
import lasio
import matplotlib.pyplot as plt
import numpy as np

def plot_well_logs_final(las_path):
    """
    Load well log data using the FINAL CORRECTED mnemonics and plot 5 key logs in separated tracks.
    """
    try:
        # 1. Load LAS file
        las = lasio.read(las_path)
    except Exception as e:
        print(f"Error loading LAS file: {e}")
        return

    # 2. FINAL CONFIRMED CORRECT LOG MNEMONICS and Plotting Configuration
    logs_config = {
        'GR':   {'mnemonic': 'GRGC', 'label': 'GR (API)',          'color': 'black',    'limits': [0, 150], 'reverse_x': False, 'xscale': 'linear'},
        'DTCO': {'mnemonic': 'TR21', 'label': 'DTCO (us/ft)',      'color': 'green',    'limits': [140, 40], 'reverse_x': True, 'xscale': 'linear'}, # TR21 (Sonic Slowness)
        'DEN':  {'mnemonic': 'DEN',  'label': 'DEN (g/cm3)',       'color': 'red',      'limits': [1.95, 2.95], 'reverse_x': False, 'xscale': 'linear'},
        'NPHI': {'mnemonic': 'NPOR', 'label': 'NPHI (frac.)',      'color': 'blue',     'limits': [0.45, -0.15], 'reverse_x': True, 'xscale': 'linear'}, # NPOR (Neutron Porosity)
        'RES':  {'mnemonic': 'R60T', 'label': 'R60T (Ohm.m)',       'color': 'purple',   'limits': [0.2, 200], 'reverse_x': False, 'xscale': 'log'}, # R60T (Resistivity)
    }
    
    # Check for the presence of logs and prepare plotting list
    plot_logs = []
    for key in ['GR', 'DTCO', 'DEN', 'NPHI', 'RES']:
        config = logs_config[key]
        if config['mnemonic'] in las.keys():
            plot_logs.append({
                'data': las[config['mnemonic']],
                'config': config
            })
        else:
            print(f"ERROR: Log {config['mnemonic']} (for {key}) not found. Skipping.")

    if not plot_logs:
        print("ERROR: No key logs were found to plot.")
        return

    # 3. Setup the plot area 
    num_tracks = len(plot_logs)
    fig, axes = plt.subplots(ncols=num_tracks, sharey=True, figsize=(num_tracks * 2.5, 12))
    
    if num_tracks == 1:
        axes = [axes]
    
    depth = las.index
    null_value = las.well.NULL.value
    start_depth_file = las.well.STRT.value
    stop_depth_file = las.well.STOP.value

    # 4. Plot the logs
    for i, log_info in enumerate(plot_logs):
        ax = axes[i]
        data = log_info['data']
        config = log_info['config']
        
        # Replace null values with NaN for plotting
        data_plot = np.where(data == null_value, np.nan, data)
        data_plot[np.isclose(data_plot, null_value)] = np.nan
        
        # Plot the curve
        ax.plot(data_plot, depth, color=config['color'], linewidth=1.5)
        
        # Setup X-axis limits, scale, and labels
        ax.set_xlim(config['limits'])
        
        if config.get('xscale') == 'log':
            ax.set_xscale('log')
        
        if config.get('reverse_x'):
            ax.invert_xaxis()
        
        # Set Mnemonic and Unit as X-axis label
        ax.set_xlabel(f"{config['mnemonic']} ({las.curves[config['mnemonic']].unit})", color=config['color']) 
        ax.xaxis.set_label_position("top")
        ax.tick_params(axis='x', colors=config['color'])
        ax.spines["top"].set_edgecolor(config['color'])
        ax.spines["top"].set_linewidth(1.5)
        ax.grid(which='major', color='lightgrey', linestyle='-')
        
        if i == 0:
            ax.set_ylabel(f"Depth ({las.well.STEP.unit})")
        else:
            ax.set_yticklabels([])

    # 5. Final plot customization
    axes[0].invert_yaxis() 
    plt.ylim(stop_depth_file, start_depth_file)
    
    fig.suptitle(f"Well Log Plot for {las.well.WELL.value}", fontsize=14, y=0.95)

    plt.tight_layout(rect=[0, 0.03, 1, 0.9])
    
    # Save the figure to the specified file name
    output_filename = "OUTPUT.png"
    plt.savefig(output_filename)
    # plt.show() # Uncomment to show plot during local execution

# --- EXECUTION ---
las_file_path = "BDN-C01_well.las"
# plot_well_logs_final(las_file_path)
